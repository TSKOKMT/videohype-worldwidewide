<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Screen Synchronization</title>
</head>
<body>
    <h1>Client Count: <span id="clientCount">0</span></h1>
    <h1>Your IP: <span id="yourIP"></span></h1>
    <h1><span id="yourColor">Your Color</span></h1>
    <button id="helloButton">Hello</button>
    <button id="yoButton">Yo</button>
    <button id="goodEveningButton">Good Evening</button>
    <div id="messageContainer"></div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        var socket = io();

        socket.on('clientCount', count => {
            document.getElementById('clientCount').textContent = count;
        });

        socket.on('yourIP', ip => {
            document.getElementById('yourIP').textContent = ip;
        });

        socket.on('yourColor', color => {
            document.getElementById('yourColor').style.color = color;
        });
        
        // When the button is clicked, emit 'userAction' event
        document.getElementById('helloButton').addEventListener('click', function() {
            var actionData = {text: 'Hello'};
            socket.emit('userAction', actionData);
        });
        document.getElementById('yoButton').addEventListener('click', function() {
            var actionData = {text: 'Yo'};
            socket.emit('userAction', actionData);
        });
        document.getElementById('goodEveningButton').addEventListener('click', function() {
            var actionData = {text: 'Good Evening'};
            socket.emit('userAction', actionData);
        });

        // Handle broadcasted action from the server
        socket.on('actionBroadcast', function(actionData) {
            // Update UI or perform any necessary action based on actionData
            console.log('Received broadcasted action:', actionData);
            const messageContainer = document.getElementById('messageContainer');
            messageContainer.innerHTML = '';
            var newH1 = document.createElement('h1');
            newH1.innerHTML = actionData;
            messageContainer.appendChild(newH1);
        });
    </script>
</body>
</html>